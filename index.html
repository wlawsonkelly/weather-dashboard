<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
      <link rel="stylesheet" href="style.css" />
  <title>Weather Dashboard</title>

</head>

<body>
    <div class="row" id="row-1">
        <div class="col-md-12">
            <strong><h1>Weather Dashboard</h1></strong>
        </div>  
    </div>
    <br>
    <div class="container">
    <div class="row" id="row-1">
        <div class="col-md-4">
            <form class="form-inline my-2 my-lg-0">
                <input id="search-input" class="form-control mr-sm-2" type="search" placeholder="Enter City" aria-label="Search">
                <button id="search-button" class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
              </form>
        </div>
    </div>
    
        <div class="row" id="row-2">
            <div class="col-md-4" id="left-col">
              <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Austin</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Chicago</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">New York</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Orlando</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">San Francisco</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Seattle</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Denver</button>
                <button class="city-button" id="v-pills-Austin-tab" data-toggle="pill" href="#v-pills-Austin" role="tab" aria-controls="v-pills-Austin" aria-selected="false">Atlanta</button>
              </div>
            </div>
            <div class="col-md-8">
              <div class="tab-content" id="v-pills-tabContent">
                <div class="tab-pane fade show active" id="v-pills-Austin" role="tabpanel" aria-labelledby="v-pills-Austin-tab">
                    <div id="austin-info">
                        <h3><span id="city-name">City Name</span></h3>
                        <h6>Temperature: <span id="temperature"></span> F</h6>
                        <h6>Humidity: <span id="humidity"></span> %</h6>
                        <h6>Wind: <span id="wind"></span> MPH</h6>
                        <h6>UV Index: <span id="uv"></span></h6>
                     </div>
                     <br>
                     <div id="5-day-view">
                      <strong><h4>5 Day Forcast:</h4></strong>
                      <div class="row">

                        <div class="dayCard">
                            <div class="five-day-card" id="one-day-ahead">
                                <h6 id="date1">Today</h6>
                                <div id="icon1"></div>
                                <p>Temp: <span id="temp1"></span>F</p>
                            </div>
                        </div>
                        <div class="dayCard">
                            <div class="five-day-card" id="two-day-ahead">
                                <h6 id="date2">Today</h6>
                                <div id="icon2"></div>
                                <p>Temp: <span id="temp2"></span>F</p>
                            </div>
                        </div>
                        <div class="dayCard">
                            <div class="five-day-card" id="three-day-ahead">
                                <h6 id="date3">Today</h6>
                                <div id="icon3"></div>
                                <p>Temp: <span id="temp3"></span>F</p>

                             </div>
                        </div>
                        <div class="dayCard">
                            <div class="five-day-card" id="four-day-ahead">
                               <h6 id="date4">Day</h6> 
                               <div id="icon4"></div>
                               <p>Temp: <span id="temp4"></span>F</p>

                             </div>
                        </div>
                        <div class="dayCard">
                            <div class="five-day-card" id="five-day-ahead">
                                 <h6 id="date5">Today</h6>
                                 <div id="icon5"></div>
                                 <p>Temp: <span id="temp5"></span>F</p>

                             </div>
                        </div>
                      </div>
                     </div>
                </div>
     
              </div>
            </div>
          
        </div>
    </div>
    <footer>
        Made with sweat and tears.

    </footer>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script type="text/javascript">

$(document).ready(function() {

var cityNameButtonText = ""
var key = "&appid=7e2757c8a7f819ab99a419d416157664";
var queryUrl = ""

console.log(cityNameButtonText)

var cityNameEl = $("#city-name");
var temperatureEl = $("#temperature");
var humidityEl = $("#humidity");
var windEl = $("#wind");
var uvEl = $("#uv");
var currentDate = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
var day = currentDate.getDate()
var month = currentDate.getMonth() + 1
var year = currentDate.getFullYear()
//currentDate.setDate(currentDate.getDate() + 1);

$("#date1").text(month + "/" + (day + 1) + "/"  + year);
$("#date2").text(month + "/" +  (day + 2) + "/"  + year);
$("#date3").text(month + "/" +  (day + 3) + "/"  + year);
$("#date4").text(month + "/" +  (day + 4) + "/"  + year);
$("#date5").text(month + "/" +  (day + 5 ) + "/"  + year);

var fiveDayTemp1 = $("#temp1");
var fiveDayTemp2 = $("#temp2");
var fiveDayTemp3 = $("#temp3");
var fiveDayTemp4 = $("#temp4");
var fiveDayTemp5 = $("#temp5");

var icon1 = $("#icon1");
var icon2 = $("#icon2");
var icon3= $("#icon3");
var icon4 = $("#icon4");
var icon5 = $("#icon5");

$(".city-button").on("click", function(e){
    e.preventDefault();
    cityNameButtonText = $(this).text();
    queryUrl = "https://api.openweathermap.org/data/2.5/forecast?q=" + cityNameButtonText + key;
    console.log("togglecliked");
    $.ajax({
        url: queryUrl,
        method: "GET"
        }).then(function(response) {
            console.log("done")
            console.log(queryUrl);
          console.log(response);
          
          var tempF = (response.list[0].main.temp- 273.15) * 1.80 + 32;
        cityNameEl.text(cityNameButtonText);
        temperatureEl.text(Math.floor(tempF));
        humidityEl.text(response.list[0].main.humidity);
            windEl.text(response.list[0].wind.speed);
            uvEl.text("Never go outside ever");
            cityNameEl.text(cityNameEl.text() + " " + response.list[0].weather[0].description)

           //Five day
           //for loop better
           fiveDayTemp1.text(Math.floor((response.list[1].main.temp- 273.15) * 1.80 + 32));
           fiveDayTemp2.text(Math.floor((response.list[2].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp3.text(Math.floor((response.list[3].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp4.text(Math.floor((response.list[4].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp5.text(Math.floor((response.list[5].main.temp- 273.15) * 1.80 + 32))

           icon1.text(response.list[1].weather[0].description);
            icon2.text(response.list[2].weather[0].description);
            icon3.text(response.list[3].weather[0].description);
            icon4.text(response.list[4].weather[0].description);
            icon5.text(response.list[5].weather[0].description);

        });
});

$("#search-button").on("click", function(e){
    e.preventDefault();
    cityNameButtonText = $("#search-input").val();
    queryUrl = "https://api.openweathermap.org/data/2.5/forecast?q=" + cityNameButtonText + key;
    console.log("clicked search");
    $.ajax({
        url: queryUrl,
        method: "GET",
        error: function (request, error) {
        console.log(arguments);
        alert(" Can't do because city DNE" );
        return
    },
        }).then(function(response) {
            if (response !== undefined) {
            console.log(queryUrl);
          console.log(response);
          
          var tempF = (response.list[0].main.temp- 273.15) * 1.80 + 32;
        cityNameEl.text(cityNameButtonText);
        temperatureEl.text(Math.floor(tempF));
        humidityEl.text(response.list[0].main.humidity);
            windEl.text(response.list[0].wind.speed);
            uvEl.text("Never go outside ever");
            cityNameEl.text(cityNameEl.text() + " " + response.list[0].weather[0].description)

           //Five day
           //for loop better
           fiveDayTemp1.text(Math.floor((response.list[1].main.temp- 273.15) * 1.80 + 32));
           fiveDayTemp2.text(Math.floor((response.list[2].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp3.text(Math.floor((response.list[3].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp4.text(Math.floor((response.list[4].main.temp- 273.15) * 1.80 + 32))
           fiveDayTemp5.text(Math.floor((response.list[5].main.temp- 273.15) * 1.80 + 32))

           icon1.text(response.list[1].weather[0].description);
            icon2.text(response.list[2].weather[0].description);
            icon3.text(response.list[3].weather[0].description);
            icon4.text(response.list[4].weather[0].description);
            icon5.text(response.list[5].weather[0].description);
            } else {
                alert("City doesn't exist");
            }
        });
    });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

</body>

</html>